{% extends 'social/base.html' %}

{% block active %}
    <li class="nav-item">
        <a class="nav-link" id="navTimeline" href="{%  url "social:timeline" %}">Timeline<span class="sr-only">(current)</span></a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="navSearch" href="{%  url "social:search" %}">Search</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="navMyFriends" href=" {%  url "social:friends" %}">My friends</a>
    </li>
    <li class="nav-item active">
        <a class="nav-link" id="navMyFriends" href=""> Chat </a>
    </li>
    <li class="nav-item">
        <a class="nav-link" id="navLogout" href="{% url "social:logout_view" %}">Logout</a>
    </li>
{% endblock%}

{% block content %}
    <h1><strong> Chat </strong></h1>
    <h2> Created: {{ date }}</h2>
    <br> <br>

    <form action="{% url "social:new_chat" friend.id "none" chat_id%}" method="post">
        {% csrf_token %}
        {{ chat_form }}
        <input class="btn btn-info btn-sm" id="submitButton" type="submit" value="Send">
    </form>

    <ul>
        {%  for m in chat_messages %}

            <li> <div class="card" style="width: 30rem;">
                <div class="card-body">

                    {% if m.author == m.recipients.last %}
                        <h5 class="card-title">{{ m.author.usuario.first_name }} -> {{ m.recipients.first.usuario.first_name }}</h5>
                    {% else %}
                        <h5 class="card-title">{{ m.author.usuario.first_name }} -> {{ m.recipients.last.usuario.first_name }}</h5>
                    {% endif %}

                    <div><p>{{ m.text }}</p></div>
                    <div style="float:right" ><p> <strong> posted </strong> {{ m.pub_date }}</p></div>
                </div>
            </div>
            </li><br>

        {% endfor %}
    </ul>

{% endblock %}